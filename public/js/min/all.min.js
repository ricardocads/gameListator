var gameListator=angular.module("gameListator",["ngMaterial","ngAnimate","ngMessages","ngAria","ui.router","firebase"]);!function(e){e.config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("edit",{url:"/edit/:id",templateUrl:"partials/edit-partial.html",controller:"EditController"}).state("list",{url:"/",templateUrl:"partials/list-partial.html",controller:"ListController"}).state("add",{url:"/add",templateUrl:"partials/add-partial.html",controller:"AddController"})}])}(gameListator),function(e){e.controller("AddController",["$scope",function(e){e.game={id:"",img:"",title:"",console:"",year:"",completed:"",dateCompletion:new Date,notes:""},e.statesCompleted="Yes/No".split("/").map(function(e){return{option:e}}),e.consoles="Mega Drive/Nintendo Switch/Nintendo 64/Playstation 1/Playstation 2/Playstation 3/Playstation 4/Super Nintendo/Xbox 360/Xbox One".split("/").map(function(e){return{name:e}}),e.cancelAction=function(){window.location.href="#!/list"},e.submit=function(){var t={id:"",img:"",title:e.game.title,console:e.game.console,year:e.game.year,completed:e.game.completed,dateCompletion:e.game.dateCompletion.getMonth()+1+"/"+e.game.dateCompletion.getDate()+"/"+e.game.dateCompletion.getFullYear(),notes:e.game.notes};"No"==t.completed&&(t.dateCompletion="");var o=firebase.database().ref().child("games").push().key;t.id=o;var a={};a["/games/"+o]=t,firebase.database().ref().update(a),window.location.href="#!/list"}}]),e.config(function(e){e.preAssignBindingsEnabled(!0)})}(gameListator),function(e){e.controller("EditController",["$scope","$http","$stateParams","$state",function(e,t,o,a){e.statesCompleted="Yes/No".split("/").map(function(e){return{option:e}}),e.consoles="Mega Drive/Nintendo Switch/Nintendo 64/Playstation 1/Playstation 2/Playstation 3/Playstation 4/Super Nintendo/Xbox 360/Xbox One".split("/").map(function(e){return{name:e}}),e.game={id:"",img:"",title:"",console:"",year:"",completed:"",dateCompletion:new Date,notes:""};firebase.database().ref("/games/"+o.id).once("value").then(function(t){var o={id:t.val().id,img:t.val().img,title:t.val().title,console:t.val().console,year:parseInt(t.val().year),completed:t.val().completed,dateCompletion:new Date(t.val().dateCompletion),notes:t.val().notes};e.$apply(function(){e.game=o})}),e.updateGame=function(){console.log("entrou");var t={id:o.id,img:"",title:e.game.title,console:e.game.console,year:e.game.year,completed:e.game.completed,dateCompletion:e.game.dateCompletion.getMonth()+1+"/"+e.game.dateCompletion.getDate()+"/"+e.game.dateCompletion.getFullYear(),notes:e.game.notes};"No"==t.completed&&(t.dateCompletion="");var a={};a["/games/"+t.id]=t,firebase.database().ref().update(a),window.location="http://localhost:3000/#!/"},e.cancelAction=function(){window.location.href="#!/list"}}])}(gameListator),function(e){e.controller("ListController",["$scope",function(e){function t(){i.classList.remove("show"),i.classList.add("hide"),n.classList.remove("show"),n.classList.add("hide")}function o(){""===l.value&&(i.classList.remove("hide"),i.classList.add("show"),n.classList.remove("hide"),n.classList.add("show"))}function a(){i.classList.remove("hide"),i.classList.add("show"),n.classList.remove("hide"),n.classList.add("show")}var n=document.querySelector(".md-fab"),i=document.querySelector(".header"),l=document.querySelector(".search-box-input"),s=document.querySelector(".delete");l.addEventListener("focus",t),l.addEventListener("blur",o),s.addEventListener("click",a),e.customFilter=function(t){return!e.search||t.title===e.search||t.console===e.search},e.todos=[],firebase.database().ref("/games/").orderByChild("dateCompletion").once("value").then(function(t){var o=[];t.forEach(function(e){var t=e.val(),a={id:t.id,img:t.img,title:t.title,console:t.console,year:t.year,yearsold:(new Date).getFullYear()-t.year,completed:t.completed,dateCompletion:t.dateCompletion,notes:t.notes};o.unshift(a)}),e.$apply(function(){e.todos=o})}),e.addGame=function(){window.location.href="#!/add"},e.removeGame=function(e){firebase.database().ref("/games/").child(e).remove(),window.location.reload()},e.editGame=function(e){window.location.href="#!/edit/"+e}}])}(gameListator);